syntax = "proto3";

import "google/protobuf/timestamp.proto";

service PostProto {
  rpc getPosts(EmptyPost) returns (GetPostsResponseDto);
  rpc getPost(PostId) returns (Post);
  rpc createPost(CreatePostDto) returns (Post);
  rpc updatePost(UpdatePostDto) returns (Post);
  rpc deletePost(PostId) returns (DeletePostResponseDto);
}

message GetPostsResponseDto {
  repeated Post posts = 1;
}

message DeletePostResponseDto {
  bool success = 1;
}

message EmptyPost {}

message PostId {
  int32 id = 1;
}

message UpdatePostDto {
  int32 id = 1;
  int32 authorId = 2;
  string message = 3;
  string attachment = 4;
  repeated CommentDto comments = 5;
  google.protobuf.Timestamp createdAt = 6;
  google.protobuf.Timestamp updatedAt = 7;
}

message CreatePostDto {
  int32 authorId = 1;
  string message = 2;
  string attachment = 3;
}

message Post {
  int32 id = 1;
  int32 authorId = 2;
  string message = 3;
  string attachment = 4;
  repeated CommentDto comments = 5;
  google.protobuf.Timestamp createdAt = 6;
  google.protobuf.Timestamp updatedAt = 7;
}

message CommentDto {
  int32 id = 1;
  int32 authorId = 2;
  string message = 3;
  string attachment = 4;
  int32 postId = 5;
}
  